var Count={generateInterval:0,data:{},time:"",lunch:0,init:function(){let t=JSON.parse(localStorage.getItem("count"));null===t&&(localStorage.setItem("count","{}"),t={}),t.time=t.time||"1800",t.lunch=t.lunch||"1130",this.data=t,this.save(),"disabled"!==t.status&&(Count.initHtml(),Count.start())},initHtml:function(){const a=this.data,t=document.createElement("div");t.setAttribute("class","time_content"),t.setAttribute("id","timeContent"),void 0!==a.left&&void 0!==a.top&&document.documentElement.clientHeight>a.top&&document.documentElement.clientWidth>a.left&&t.setAttribute("style","left:"+a.left+"px;top:"+a.top+"px;"),t.innerHTML="<a class='time_box' id='countRemainBox'>è·ç¦»ä¸‹ç­:<br><span id='countRemain'></span></a>",document.body.insertBefore(t,document.body.firstChild);let s=document.getElementById("timeContent");s.onmousedown=t=>{let n=t.clientX-s.offsetLeft,l=t.clientY-s.offsetTop,i,o;document.onmousemove=function(t){var e=t.clientX-n,t=t.clientY-l;i=e,o=t,a.left=e,a.top=t,Count.save(),0<=e&&e<=window.innerWidth-s.offsetWidth&&(s.style.left=e+"px"),0<=t&&t<=window.innerHeight-s.offsetHeight&&(s.style.top=t+"px")},document.onmouseup=function(t){document.onmousemove=null,document.onmouseup=null,void 0===i&&void 0===o&&Count.settings()}}},generate:function(){var t=this.data,e=(new Date).getFullYear();let n=(new Date).getMonth()+1,l=(new Date).getDate();n<10&&(n="0"+n),l<10&&(l="0"+l);var i=e+"-"+n+"-"+l,e=("0"+t.time).match(/(\d{2})(\d{2})$/);let o=i+" "+e[1]+":"+e[2]+":00",a=new Date(o.replace(/-/g,"/")),s=new Date,c=i+" "+(e=("0"+t.lunch).match(/(\d{2})(\d{2})$/))[1]+":"+e[2]+":00",u=new Date(c.replace(/-/g,"/"));s.toString()===u.toString()&&Util.notice("success",15e3,"ä¸­åˆå’¯ï¼Œè¯¥è®¢é¥­å•¦ï½");e=a.getTime()-s.getTime();let d=Math.floor(e/36e5%24),m=Math.floor(e/6e4%60),f=Math.floor(e/1e3%60);0<=d&&0<=m&&0<=f?(d<10&&(d="0"+d),m<10&&(m="0"+m),f<10&&(f="0"+f),e=d+":"+m+":"+f,"00"===d&&"02"===m&&"00"===f&&Util.notice("danger",3e3,"é©¬ä¸Šå°±è¦ä¸‹ç­å•¦ï¼Œèµ¶å¿«æ”¶æ‹¾æ”¶æ‹¾å§ï½"),"00"===d&&"00"===m&&"00"===f&&Util.notice("success",3e3,"ä¸‹ç­äº†ï¼ä¸‹ç­äº†ï¼ä¸‹ç­äº†ï¼ï¼ï¼"),document.getElementById("countRemain").innerText=e):(document.getElementById("countRemainBox").innerText="ä¸‹ç­\næ—¶é—´åˆ° ğŸ‰",clearInterval(Count.generateInterval))},start:function(){Count.generate(),Count.generateInterval=setInterval(function(){Count.generate()},1e3)},save:function(){localStorage.setItem("count",JSON.stringify(this.data))},settings:function(){const e=this.data;Util.alert(`<div class="form fn__flex-column">
<label>
  <div class="ft__smaller ft__fade" style="float: left">çŠ¶æ€ï¼ˆå…³é—­åå¯ç‚¹å‡»å³ä¸Šè§’å¤´åƒæ‰¾åˆ°ä¸‹ç­å€’è®¡æ—¶è®¾å®šï¼‰</div>
  <div class="fn-hr5 fn__5"></div>
  <select id="countSettingStatus">
  <option value="enabled" selected>å¼€å¯</option>  <option value="disabled">å…³é—­</option>  </select>
</label>
<label>
  <div class="ft__smaller ft__fade" style="float: left">ä¸‹ç­æ—¶é—´</div>
  <div class="fn-hr5 fn__5"></div>
  <input id="countSettingsTime" type="time"/>
</label>
<label>
  <div class="ft__smaller ft__fade" style="float: left">è®¢é¥­æ—¶é—´</div>
  <div class="fn-hr5 fn__5"></div>
  <input id="lunchSettingsTime" type="time"/>
</label>
<div class="fn-hr5"></div>
<div class="fn__flex" style="margin-top: 15px">
<div class="fn__flex-1 fn__flex-center" style="text-align: left;"></div>
  <button class="btn btn--confirm" onclick='Count.saveSettings()'>ä¿å­˜</button>
</div>
</div>`,"ä¸‹ç­å€’è®¡æ—¶è®¾å®š"),setTimeout(function(){var t=("0"+e.time).match(/(\d{2})(\d{2})$/);switch(document.getElementById("countSettingsTime").value=t[1]+":"+t[2],t=("0"+e.lunch).match(/(\d{2})(\d{2})$/),document.getElementById("lunchSettingsTime").value=t[1]+":"+t[2],e.status){case"enabled":document.getElementById("countSettingStatus").value="enabled";break;case"disabled":document.getElementById("countSettingStatus").value="disabled"}},300)},saveSettings:function(){const t=this.data;var e=document.getElementById("countSettingsTime").value.replace(":","");""!==e&&(t.time=e);e=document.getElementById("lunchSettingsTime").value.replace(":","");""!==e&&(t.lunch=e),t.status=document.getElementById("countSettingStatus").value,this.data=t,Count.save(),Util.closeAlert(),location.reload()}};$(document).ready(function(){Count.init()});